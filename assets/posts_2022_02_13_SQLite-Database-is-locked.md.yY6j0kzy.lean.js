import{_ as e,c as a,a2 as s,o as t}from"./chunks/framework.DRc6tsBz.js";const i=JSON.parse('{"title":"【Work】SQLite: Database is locked","description":"","frontmatter":{"title":"【Work】SQLite: Database is locked","categories":"Work","tags":["Work","datebase"],"sidebar":false,"prev":false,"next":false,"comments":true,"date":"2022-02-13T00:10:14.000Z"},"headers":[],"relativePath":"posts/2022/02_13_SQLite-Database-is-locked.md","filePath":"posts/2022/02_13_SQLite-Database-is-locked.md","lastUpdated":1713284123000}');const o=e({name:"posts/2022/02_13_SQLite-Database-is-locked.md"},[["render",function(e,i,o,l,r,d){return t(),a("div",null,i[0]||(i[0]=[s('<h1 id="sqlite-database-is-locked" tabindex="-1">SQLite: Database is locked <a class="header-anchor" href="#sqlite-database-is-locked" aria-label="Permalink to &quot;SQLite: Database is locked&quot;">​</a></h1><blockquote><p>SQLite 数据库无法写入数据，报错：Database is locked</p></blockquote><p>一般有被锁住，大概率是和并发之类的相关，同时操作数据库出的问题；想想不应该呀，我那个是单线程操作一个SQLite数据库；就去Google找了下资料。找到 <code>fuser</code>命令，可以用来查看那些进程open了这个数据库文件；显示有两个同名的进程，程序被启动了两次，好家伙。然后排查，一个是自己脚本启动的，一个是被dbus唤起的；原因是数据库的进程有初始化的耗时操作，其它进程没有找到脚本启动的那个数据库进程，唤起了一个进程</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fuser</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xxx.db</span></span></code></pre></div><p>后续有时间在深入研究</p><h2 id="references" tabindex="-1">References: <a class="header-anchor" href="#references" aria-label="Permalink to &quot;References:&quot;">​</a></h2><ol><li><a href="https://stackoverflow.com/questions/151026/how-do-i-unlock-a-sqlite-database" target="_blank" rel="noreferrer">https://stackoverflow.com/questions/151026/how-do-i-unlock-a-sqlite-database</a></li><li><a href="https://www.sqlite.org/lockingv3.html" target="_blank" rel="noreferrer">https://www.sqlite.org/lockingv3.html</a></li></ol>',7)]))}]]);export{i as __pageData,o as default};
